<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.64.1" />

<META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">



<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Troubleshooting | </title><meta property="og:title" content="Troubleshooting" />
<meta property="og:description" content="This section is aimed to help you troubleshoot issues in your cluster, whether they are related to the StorageOS installation, integration with orchestrators or common misconfigurations.
Tools To be able to troubleshoot issues the StorageOS cli is required.
Pod in pending because of mount error Issue: The output of kubectl describe pod $POD_ID contains no such file or directory and references the StorageOS volume device file.
root@node1:~# kubectl -n kube-system describe $POD_ID (." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://docs.storageos.com/docs/operations/troubleshooting/" />

<meta itemprop="name" content="Troubleshooting">
<meta itemprop="description" content="This section is aimed to help you troubleshoot issues in your cluster, whether they are related to the StorageOS installation, integration with orchestrators or common misconfigurations.
Tools To be able to troubleshoot issues the StorageOS cli is required.
Pod in pending because of mount error Issue: The output of kubectl describe pod $POD_ID contains no such file or directory and references the StorageOS volume device file.
root@node1:~# kubectl -n kube-system describe $POD_ID (.">

<meta itemprop="wordCount" content="2788">



<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Troubleshooting"/>
<meta name="twitter:description" content="This section is aimed to help you troubleshoot issues in your cluster, whether they are related to the StorageOS installation, integration with orchestrators or common misconfigurations.
Tools To be able to troubleshoot issues the StorageOS cli is required.
Pod in pending because of mount error Issue: The output of kubectl describe pod $POD_ID contains no such file or directory and references the StorageOS volume device file.
root@node1:~# kubectl -n kube-system describe $POD_ID (."/>



<link rel="stylesheet"  href="/css/font-awesome.css?ver=5.4.1" type="text/css" media="all">



<link rel="preload" href="/scss/main.min.f438d2b9796945cd1ecf249ee847e52b86c90b71a65473dd7df133307855c9d3.css" as="style">
<link href="/scss/main.min.f438d2b9796945cd1ecf249ee847e52b86c90b71a65473dd7df133307855c9d3.css" rel="stylesheet" integrity="">


<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>




<script
  src="https://unpkg.com/lunr@2.3.8/lunr.min.js"
  integrity="sha384-vRQ9bDyE0Wnu+lMfm57BlYLO0/XauFuKpVsZPs7KEDwYKktWi5+Kz3MP8++DFlRY"
  crossorigin="anonymous"></script>


<script
  src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.js"
  integrity=""
  crossorigin="anonymous"></script>
<link href="/css/storageos.css" rel="stylesheet">
<script> (function(h,o,t,j,a,r){ h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)}; h._hjSettings={hjid:1025326,hjsv:6}; a=o.getElementsByTagName('head')[0]; r=o.createElement('script');r.async=1; r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv; a.appendChild(r); })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv='); </script>
<script src="/js/enable-link-tab.js"></script>


    <title>Troubleshooting | </title>
  </head>
  <body class="td-page">
    <header>
      
<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">

    <div class="col-2 col-sm-2">
      <div class="navbar-header">
        <div class="logo-tag">

          <a class="navbar-brand" href="/">
  		<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="476.964" height="141.732" viewBox="0 0 476.964 141.732" enable-background="new 0 0 476.964 141.732"><g><g><path fill="#fff" d="M34.74 89.882H3.477v-9.34h31.264c1.538.0 2.704-.355 3.476-1.062.744-.693 1.118-1.655 1.118-2.854.0-1.318-.363-2.293-1.078-2.896-.778-.661-1.959-.996-3.515-.996H16.346c-2.017.0-3.873-.302-5.538-.905-1.681-.627-3.113-1.499-4.277-2.604-1.164-1.099-2.073-2.429-2.708-3.96-.63-1.521-.954-3.196-.954-4.967.0-1.742.293-3.379.884-4.863.592-1.499 1.489-2.828 2.67-3.938 1.181-1.097 2.635-1.957 4.316-2.572 1.657-.604 3.578-.917 5.707-.917h30.002v9.342H16.446c-1.267.0-2.232.312-2.885.928-.63.615-.943 1.487-.943 2.673.0 1.187.3 2.025.961 2.64.656.604 1.602.917 2.805.917h18.321c4.36.0 7.757 1.054 10.085 3.145 2.375 2.102 3.579 5.291 3.579 9.462.0 1.812-.284 3.5-.841 5.021-.562 1.567-1.42 2.941-2.561 4.105-1.169 1.163-2.618 2.081-4.328 2.695C38.975 89.556 36.982 89.882 34.74 89.882z"/></g><g><path fill="#fff" d="M79.764 89.882h-9.486V57.344H55.081v-9.339h39.878v9.339H79.762v32.537L79.764 89.882z"/></g><g><path fill="#fff" d="M129.784 89.882h-9.733c-2.96.0-5.731-.547-8.248-1.653-2.527-1.099-4.742-2.606-6.57-4.51-1.853-1.891-3.306-4.172-4.329-6.755-1.026-2.604-1.544-5.436-1.544-8.422.0-3.028.521-5.849 1.544-8.376 1.033-2.54 2.512-4.73 4.367-6.521 1.864-1.789 4.072-3.198 6.578-4.161 2.509-.984 5.264-1.478 8.201-1.478h9.733c3.043.0 5.878.503 8.422 1.499 2.545.996 4.77 2.415 6.616 4.229 1.846 1.823 3.288 4.015 4.294 6.521 1.01 2.482 1.521 5.278 1.521 8.286.0 3.021-.516 5.853-1.538 8.422-1.039 2.597-2.498 4.877-4.34 6.768-1.84 1.891-4.055 3.411-6.587 4.508C135.634 89.332 132.812 89.882 129.784 89.882zM120.052 57.344c-1.613.0-3.129.28-4.515.854-1.363.57-2.557 1.364-3.521 2.348-.99 1.008-1.772 2.215-2.334 3.624-.563 1.409-.848 2.986-.848 4.688.0 1.687.285 3.274.86 4.729.572 1.442 1.345 2.686 2.323 3.682.988 1.018 2.18 1.835 3.539 2.404 1.356.58 2.873.871 4.497.871h9.733c1.675.0 3.221-.291 4.583-.871 1.385-.569 2.597-1.388 3.596-2.404.982-.996 1.777-2.237 2.35-3.691.568-1.442.853-3.031.853-4.719.0-1.669-.284-3.244-.853-4.677-.561-1.409-1.351-2.63-2.344-3.624-.989-.995-2.198-1.788-3.596-2.372-1.386-.56-2.924-.84-4.589-.84L120.052 57.344z"/></g><path fill="#fff" d="M195.707 77.802c1.812-.727 3.38-1.724 4.652-3.009 1.375-1.366 2.432-2.717 3.15-4.642.643-1.711.994-3.611 1.057-5.692.006-.225.012-.6.012-.835v-.11c0-2.35-.356-4.483-1.068-6.389-.719-1.923-1.774-3.59-3.149-4.965-1.362-1.365-3.044-2.428-5.016-3.154-1.937-.716-4.139-1.085-6.786-1.007H159.05h-.483v41.882h9.706V78.975h16.071l10.03 10.903h13.561L195.707 77.802zM193.617 68.821c-1.039 1.085-2.661 1.645-4.827 1.645h-20.513V57.26h20.53c2.077.0 3.69.517 4.781 1.521 1.079 1.008 1.624 2.64 1.624 4.842C195.213 65.85 194.669 67.702 193.617 68.821z"/><path fill="#fff" d="M243.355 50.3c-.5-.839-1.086-1.499-1.723-1.968-1.441-1.105-3.906-1.12-5.438-.034-.693.516-1.277 1.188-1.75 1.992l-24.148 39.592h10.889l5.967-9.933h23.068l6.008 9.933h11.322L243.355 50.3zM230.384 72.812l8.275-13.757 8.311 13.757H230.384z"/><g><path fill="#fff" d="M314.21 89.882h-25.385c-2.959.0-5.728-.547-8.23-1.653-2.533-1.099-4.738-2.616-6.557-4.497-1.847-1.901-3.3-4.171-4.33-6.768-1.031-2.596-1.549-5.424-1.549-8.422.0-3.041.526-5.849 1.561-8.376 1.023-2.525 2.49-4.73 4.354-6.521 1.861-1.789 4.076-3.198 6.594-4.161 2.506-.984 5.265-1.478 8.185-1.478h22.94v9.342h-22.94c-1.613.0-3.123.291-4.511.851-1.34.56-2.524 1.354-3.53 2.359-.974.993-1.754 2.2-2.317 3.609-.558 1.398-.841 2.979-.841 4.688.0 1.687.283 3.274.847 4.729.573 1.442 1.352 2.686 2.321 3.682 1 1.018 2.19 1.835 3.533 2.416 1.353.567 2.862.872 4.498.872h15.883v-7.817h-18.063v-8.232h27.543v25.377H314.21V89.882z"/></g><g><path fill="#fff" d="M363.412 57.344h-38.285v-9.339h38.285V57.344z"/></g><g><path fill="#fff" d="M363.472 89.882h-38.346V64.504h36.75v8.231h-27.277v7.807h28.875v9.34H363.472z"/></g><g><path fill="#61c202" d="M402.357 89.882h-9.75c-2.961.0-5.725-.547-8.234-1.653-2.514-1.086-4.725-2.606-6.572-4.51-1.857-1.9-3.326-4.183-4.328-6.767-1.02-2.604-1.553-5.436-1.553-8.41.0-3.021.521-5.838 1.553-8.376 1.035-2.54 2.5-4.73 4.355-6.521 1.871-1.789 4.084-3.198 6.584-4.161 2.512-.984 5.271-1.478 8.195-1.478h9.75c3.033.0 5.859.503 8.416 1.499 2.568 1.009 4.799 2.438 6.611 4.238 1.84 1.801 3.285 3.994 4.291 6.497 1.012 2.517 1.523 5.304 1.523 8.3.012 3.009-.516 5.838-1.545 8.422-1.023 2.583-2.48 4.864-4.336 6.768-1.848 1.899-4.064 3.422-6.596 4.508C408.193 89.332 405.38 89.882 402.357 89.882zM392.607 57.344c-1.619.0-3.135.291-4.498.854-1.361.57-2.549 1.364-3.531 2.348-.984.996-1.768 2.215-2.314 3.613-.568 1.397-.857 2.986-.857 4.698.0 1.696.289 3.286.852 4.719.566 1.442 1.35 2.685 2.328 3.691.984 1.018 2.17 1.835 3.535 2.404 1.354.58 2.857.871 4.48.871h9.762c1.652.0 3.197-.291 4.572-.871 1.375-.569 2.596-1.388 3.602-2.404.971-.996 1.766-2.229 2.354-3.691.553-1.453.842-3.042.842-4.719.0-1.656-.289-3.234-.852-4.679-.557-1.422-1.352-2.628-2.34-3.622-1.01-.995-2.209-1.802-3.59-2.358-1.379-.562-2.936-.854-4.588-.854H392.607z"/></g><g><path fill="#61c202" d="M461.541 89.882h-31.258v-9.329h31.258c1.537.0 2.707-.355 3.475-1.071.756-.704 1.125-1.646 1.119-2.854.006-1.342-.346-2.279-1.074-2.906-.775-.649-1.961-.984-3.52-.984H443.15c-2.033.0-3.896-.302-5.539-.905-1.684-.627-3.129-1.499-4.285-2.604-1.158-1.118-2.078-2.438-2.713-3.96-.621-1.53-.934-3.196-.934-4.967.0-1.73.293-3.364.875-4.863.607-1.521 1.51-2.854 2.682-3.949 1.186-1.084 2.635-1.944 4.303-2.549 1.682-.616 3.602-.931 5.715-.931h29.984v9.341h-29.984c-1.27.0-2.25.312-2.885.928-.615.604-.943 1.51-.943 2.673.0 1.188.312 2.025.965 2.641.648.604 1.602.917 2.805.917h18.311c4.377.0 7.771 1.053 10.105 3.144 2.371 2.103 3.559 5.292 3.559 9.462.0 1.789-.271 3.468-.826 5.01-.592 1.601-1.459 2.987-2.588 4.116-1.137 1.163-2.594 2.069-4.312 2.696C465.765 89.567 463.775 89.882 461.541 89.882z"/></g></g></svg><span class="text-uppercase font-weight-bold"></span>
  	</a>

        </div>
      </div>
    </div>

    <div class="col-8 col-sm-8">
    	<div class="navbar-collapse collapse" id="bs-example-navbar-collapse-1">
    		<ul class="navbar-nav nav">
                <li>
    <a class="nav-link" href="#">
        Product <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="https://storageos.com/product">Overview</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/features">Features</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/why-storageos">Why StorageOS</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/how-it-works">How it works</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/use-cases">Use cases</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/support">Support</a></li>

    </ul>
</li>

<li class="nav-item dropdown">
    <a class="nav-link" href="#">
        Solutions <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="https://storageos.com/developers">Developers</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/infrastructure-managers">Infrastructure Managers</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/cloud">Cloud</a></li>
    </ul>
</li>

<li class="nav-item">
    <a class="nav-link" href="#">
        Docs
    </a>
</li>

<li class="nav-item dropdown">
    <a class="nav-link" href="#">
        Company <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="https://storageos.com/company">About us</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/leadership">Leadership</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/careers">Careers</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/news">News</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/events">Events</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/customers">Customers</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/partners">Partners</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/contact">Contact</a></li>
    </ul>
</li>

<li class="nav-item dropdown">
    <a class="nav-link" href="#">
          Learn <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li><a class="dropdown-item" href="https://storageos.com/blog">Blog</a></li>
        <li><a class="dropdown-item" href="https://play.storageos.com/main">Play with StorageOS</a></li>
        <li><a class="dropdown-item" href="https://storageos.com/resources/">Resources</a></li>
        <li><a class="dropdown-item" href="https://resources.storageos.com/demo-request">Get a demo</a></li>
    </ul>
</li>


    			
    			<li class="nav-item dropdown d-none d-lg-block">
    				<a class="nav-link" href="#">
		Releases <span class="caret"></span>
</a>
<ul class="dropdown-menu">
	
	<li><a class="dropdown-item" href="/v1.x">v1.x</a></li>
	
	<li><a class="dropdown-item" href="/v2.0">v2.0</a></li>
	
	<li><a class="dropdown-item" href="/">v2.1</a></li>
	
</ul>

    			</li>
    			
    			
    		</ul>
  	</div>
  </div>
  	<div class="col-2 col-sm-2 nav-right-items">


<input
  type="search"
  class="form-control td-search-input"
  placeholder="Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.dc2d10b88db477b038f55ad707dcdd5546007944419ddf0bae61bb624f62d06ad0fb9aa402aca62999cda4a0becbaab50925da57d3b16a91695ef88dd6cc753b.json"
  data-offline-search-base-href="/"
>

</div>
  </div>

  <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>

</nav>

    </header>
    <div class="body-search">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#td-section-nav">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    


<input
  type="search"
  class="form-control td-search-input"
  placeholder="Search this site…"
  aria-label="Search this site…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.dc2d10b88db477b038f55ad707dcdd5546007944419ddf0bae61bb624f62d06ad0fb9aa402aca62999cda4a0becbaab50925da57d3b16a91695ef88dd6cc753b.json"
  data-offline-search-base-href="/"
>


  </div>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
            




<div id="td-sidebar-menu" class="td-sidebar__inner">
  
  <nav class="collapse td-sidebar-nav pt-2 pl-4" id="td-section-nav">
    
    






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/" class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation V2</a>
  </li>
  <ul>
    <li class="collapse show" id="docs">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/introduction/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Introduction</a>
  </li>
  <ul>
    <li class="collapse " id="docsintroduction">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintroductionoverview" href="/docs/introduction/overview/">StorageOS V2 Overview</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintroductionquickstart" href="/docs/introduction/quickstart/">Quickstart</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsintroductionplatforms" href="/docs/introduction/platforms/">Supported Platforms</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/concepts/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Concepts</a>
  </li>
  <ul>
    <li class="collapse " id="docsconcepts">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsarchitecture" href="/docs/concepts/architecture/">Architecture</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsclusters" href="/docs/concepts/clusters/">Clusters</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptscompression" href="/docs/concepts/compression/">Compression</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsetcd" href="/docs/concepts/etcd/">Etcd</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsnamespaces" href="/docs/concepts/namespaces/">Namespaces</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsnodes" href="/docs/concepts/nodes/">Nodes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptspolicies" href="/docs/concepts/policies/">Policies</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsreplication" href="/docs/concepts/replication/">Replication</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsconceptsvolumes" href="/docs/concepts/volumes/">Volumes</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/prerequisites/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Prerequisites</a>
  </li>
  <ul>
    <li class="collapse " id="docsprerequisites">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsprerequisitessystemconfiguration" href="/docs/prerequisites/systemconfiguration/">System Configuration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsprerequisitesfirewalls" href="/docs/prerequisites/firewalls/">Ports and Firewall settings</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsprerequisitesmountpropagation" href="/docs/prerequisites/mountpropagation/">Mount Propagation</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsprerequisitesetcd" href="/docs/prerequisites/etcd/">Etcd</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/install/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Install</a>
  </li>
  <ul>
    <li class="collapse " id="docsinstall">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsinstallkubernetes" href="/docs/install/kubernetes/">Kubernetes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsinstallopenshift" href="/docs/install/openshift/">OpenShift</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsinstallrancher" href="/docs/install/rancher/">Rancher</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/platforms/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Platforms</a>
  </li>
  <ul>
    <li class="collapse " id="docsplatforms">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsplatformsaws-eks" href="/docs/platforms/aws-eks/">AWS EKS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsplatformsazure-aks" href="/docs/platforms/azure-aks/">Azure AKS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsplatformsdockeree" href="/docs/platforms/dockeree/">DockerEE</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsplatformsopenshift" href="/docs/platforms/openshift/">OpenShift</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsplatformsrancher" href="/docs/platforms/rancher/">Rancher</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsbest-practices" href="/docs/best-practices/">Best Practices</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/operations/" class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Operations</a>
  </li>
  <ul>
    <li class="collapse show" id="docsoperations">
      
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/operations/etcd/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Etcd</a>
  </li>
  <ul>
    <li class="collapse " id="docsoperationsetcd">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsetcdstorageos-secret-info" href="/docs/operations/etcd/storageos-secret-info/">mTLS</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsfirstpvc" href="/docs/operations/firstpvc/">First PVC</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationshealth" href="/docs/operations/health/">Health</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsmanaging-host-storage" href="/docs/operations/managing-host-storage/">Host Storage</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationslicensing" href="/docs/operations/licensing/">Licensing</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsnamespaces" href="/docs/operations/namespaces/">Namespaces</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationspolicies" href="/docs/operations/policies/">Policies</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsstorageclasses" href="/docs/operations/storageclasses/">StorageClasses</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page  active" id="m-docsoperationstroubleshooting" href="/docs/operations/troubleshooting/">Troubleshooting</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsuninstall" href="/docs/operations/uninstall/">Uninstall StorageOS</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsusers" href="/docs/operations/users/">User Management</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsoperationsresize" href="/docs/operations/resize/">Volume Resize</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/usecases/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Use Cases</a>
  </li>
  <ul>
    <li class="collapse " id="docsusecases">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesbackups" href="/docs/usecases/backups/">Backups</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasescassandra" href="/docs/usecases/cassandra/">Cassandra</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecaseselasticsearch" href="/docs/usecases/elasticsearch/">Elasticsearch</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesjenkins" href="/docs/usecases/jenkins/">Jenkins</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecaseskafka" href="/docs/usecases/kafka/">Kafka</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecaseskubevirt" href="/docs/usecases/kubevirt/">Kubevirt</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesmssql" href="/docs/usecases/mssql/">MS SQL</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesmysql" href="/docs/usecases/mysql/">MySQL</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesnginx" href="/docs/usecases/nginx/">Nginx</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasespostgres" href="/docs/usecases/postgres/">PostgreSQL</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecasesredis" href="/docs/usecases/redis/">Redis</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsusecaseszookeeper" href="/docs/usecases/zookeeper/">Zookeeper</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/reference/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Reference</a>
  </li>
  <ul>
    <li class="collapse " id="docsreference">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceapi" href="/docs/reference/api/">API Reference</a>
      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/reference/cli/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">CLI</a>
  </li>
  <ul>
    <li class="collapse " id="docsreferencecli">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecliapply" href="/docs/reference/cli/apply/">Apply licence</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecliattach" href="/docs/reference/cli/attach/">Attach</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceclicreate" href="/docs/reference/cli/create/">Create</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceclidelete" href="/docs/reference/cli/delete/">Delete</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceclidescribe" href="/docs/reference/cli/describe/">Describe</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceclidetach" href="/docs/reference/cli/detach/">Detach Volume</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecliget" href="/docs/reference/cli/get/">Get</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceclihelp" href="/docs/reference/cli/help/">Help</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecliversion" href="/docs/reference/cli/version/">Version</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      






<ul class="td-sidebar-nav__section pr-md-3">
  <li class="td-sidebar-nav__section-title">
    <a  href="/docs/reference/cluster-operator/" class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Cluster Operator</a>
  </li>
  <ul>
    <li class="collapse " id="docsreferencecluster-operator">
      
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecluster-operatorinstall" href="/docs/reference/cluster-operator/install/">Install</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecluster-operatorconfiguration" href="/docs/reference/cluster-operator/configuration/">Configuration</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecluster-operatorexamples" href="/docs/reference/cluster-operator/examples/">Examples</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecluster-operatorupgrade" href="/docs/reference/cluster-operator/upgrade/">Operator upgrade</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencecontributing" href="/docs/reference/contributing/">Contributing to the docs</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencegui" href="/docs/reference/gui/">GUI</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceinit-container" href="/docs/reference/init-container/">Init container</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencelabels" href="/docs/reference/labels/">Labels</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencelicence" href="/docs/reference/licence/">Licence</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceopen_source_attribution" href="/docs/reference/open_source_attribution/">Open Source Attribution</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencerelease_notes" href="/docs/reference/release_notes/">Release notes</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferenceresource_requests_and_limits" href="/docs/reference/resource_requests_and_limits/">Resource Requests and Limits</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencetelemetry" href="/docs/reference/telemetry/">StorageOS Telemetry</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencebundle" href="/docs/reference/bundle/">Support bundle</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencefilesystems" href="/docs/reference/filesystems/">Supported File systems</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsreferencetolerations" href="/docs/reference/tolerations/">Tolerations</a>
      
      
    </li>
  </ul>
</ul>

      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docssupport" href="/docs/support/">Support</a>
      
      
      
      
      
      <a class="td-sidebar-link td-sidebar-link__page " id="m-docsself-eval" href="/docs/self-eval/">Self Evaluation Guide</a>
      
      
    </li>
  </ul>
</ul>

  </nav>
</div>




          </div>
          <div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
            











<nav id="TableOfContents">
  <ul>
    <li><a href="#tools">Tools</a></li>
    <li><a href="#pod-in-pending-because-of-mount-error">Pod in pending because of mount error</a>
      <ul>
        <li><a href="#issue">Issue:</a></li>
        <li><a href="#reason">Reason:</a></li>
        <li><a href="#assert">Assert:</a></li>
        <li><a href="#solution">Solution:</a></li>
        <li><a href="#assert-1">Assert:</a></li>
        <li><a href="#solution-1">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#pvc-pending-state---failed-to-dial-storageos">PVC pending state - Failed to dial StorageOS</a>
      <ul>
        <li><a href="#issue-1">Issue:</a></li>
        <li><a href="#reason-1">Reason:</a></li>
        <li><a href="#assert-2">Assert:</a></li>
        <li><a href="#solution-2">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#pvc-pending-state---secret-missing">PVC pending state - Secret Missing</a>
      <ul>
        <li><a href="#issue-2">Issue:</a></li>
        <li><a href="#reason-2">Reason:</a></li>
        <li><a href="#assert-3">Assert:</a></li>
        <li><a href="#solution-3">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#node-name-different-from-hostname">Node name different from Hostname</a>
      <ul>
        <li></li>
        <li><a href="#reason-3">Reason:</a></li>
        <li><a href="#solution-4">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#peer-discovery---networking">Peer discovery - Networking</a>
      <ul>
        <li><a href="#issue-4">Issue:</a></li>
        <li><a href="#reason-4">Reason:</a></li>
        <li><a href="#assert-4">Assert:</a></li>
        <li><a href="#solution-5">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#peer-discovery---pod-allocation">Peer discovery - Pod allocation</a>
      <ul>
        <li><a href="#issue-5">Issue:</a></li>
        <li><a href="#reason-5">Reason:</a></li>
        <li><a href="#assert-5">Assert:</a></li>
        <li><a href="#solution-6">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#lio-initerror">LIO Init:Error</a>
      <ul>
        <li><a href="#issue-6">Issue:</a></li>
        <li><a href="#reason-6">Reason:</a></li>
        <li><a href="#assert-6">Assert</a></li>
        <li><a href="#solution-7">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#lio-not-enabled">LIO not enabled</a>
      <ul>
        <li><a href="#issue-7">Issue:</a></li>
        <li><a href="#reason-7">Reason:</a></li>
        <li><a href="#assert-7">Assert</a></li>
        <li><a href="#solution-8">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#openshift-storageos-pods-missing----daemonset-error">(OpenShift) StorageOS pods missing &ndash; DaemonSet error</a>
      <ul>
        <li><a href="#issue-8">Issue:</a></li>
        <li><a href="#reason-8">Reason:</a></li>
        <li><a href="#assert-8">Assert:</a></li>
        <li><a href="#solution-9">Solution:</a></li>
      </ul>
    </li>
    <li><a href="#getting-help">Getting Help</a></li>
  </ul>
</nav>



          </div>
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            
  

            <nav aria-label="breadcrumb" class="d-none d-md-block d-print-none">
	<ol class="breadcrumb spb-1">
		










<li class="breadcrumb-item" >
	<a href="https://docs.storageos.com/docs/">Documentation V2</a>
</li>




<li class="breadcrumb-item" >
	<a href="https://docs.storageos.com/docs/operations/">Operations</a>
</li>




<li class="breadcrumb-item active" aria-current="page">
	<a href="https://docs.storageos.com/docs/operations/troubleshooting/">Troubleshooting</a>
</li>

	</ol>
</nav	>

            
<div class="td-content">
	<h1>Troubleshooting</h1>
	
	<p>This section is aimed to help you troubleshoot issues in your cluster, whether
they are related to the StorageOS installation, integration with
orchestrators or common misconfigurations.</p>
<h2 id="tools">Tools</h2>
<p>To be able to troubleshoot issues the <a href="https://github.com/storageos/go-cli">StorageOS
cli</a> is required.</p>
<h2 id="pod-in-pending-because-of-mount-error">Pod in pending because of mount error</h2>
<h3 id="issue">Issue:</h3>
<p>The output of <code>kubectl describe pod $POD_ID</code> contains <code>no such file or directory</code> and references the StorageOS volume device file.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~# kubectl -n kube-system describe <span style="color:#000">$POD_ID</span>
<span style="color:#ce5c00;font-weight:bold">(</span>...<span style="color:#ce5c00;font-weight:bold">)</span>
Events:
  <span style="color:#ce5c00;font-weight:bold">(</span>...<span style="color:#ce5c00;font-weight:bold">)</span>
  Normal   Scheduled         11s                default-scheduler  Successfully assigned default/d1 to node3
  Warning  FailedMount       4s <span style="color:#ce5c00;font-weight:bold">(</span>x4 over 9s<span style="color:#ce5c00;font-weight:bold">)</span>    kubelet, node3     MountVolume.SetUp failed <span style="color:#204a87;font-weight:bold">for</span> volume <span style="color:#4e9a06">&#34;pvc-f2a49198-c00c-11e8-ba01-0800278dc04d&#34;</span> : stat /var/lib/storageos/volumes/d9df3549-26c0-4cfc-62b4-724b443069a1: no such file or directory
</code></pre></div><h3 id="reason">Reason:</h3>
<p>There are two main reasons this issue may arise:</p>
<ul>
<li>The StorageOS <code>DEVICE_DIR</code> location is wrongly configured when using Kubelet
as a container</li>
<li>Mount Propagation is not enabled</li>
</ul>
<p>(Option 1) Misconfiguration of the DeviceDir/SharedDir</p>
<p>Some Kubernetes distributions such as Rancher, DockerEE or some installations
of OpenShift deploy the Kubelet as a container, because of this, the device
files that StorageOS creates to mount into the containers need to be visible to
the kubelet. StorageOS can be configured to share the device directory.</p>
<p>Modern installations use CSI, which handles the complexity internally.</p>
<h3 id="assert">Assert:</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~# kubectl -n default describe stos <span style="color:#000;font-weight:bold">|</span> grep <span style="color:#4e9a06">&#34;Shared Dir&#34;</span>
  Shared Dir:      <span style="color:#8f5902;font-style:italic"># &amp;lt;-- Shouldn&#39;t be blank</span>
</code></pre></div><h3 id="solution">Solution:</h3>
<p>The Cluster Operator Custom Definition should specify the SharedDir option as follows.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">spec:
  sharedDir: <span style="color:#4e9a06">&#39;/var/lib/kubelet/plugins/kubernetes.io~storageos&#39;</span> <span style="color:#8f5902;font-style:italic"># Needed when Kubelet as a container</span>
  ...
</code></pre></div><blockquote>
<p>See example on how to configure the <a href="/docs/reference/cluster-operator/examples/#specifying-a-shared-directory-for-use-with-kubelet-as-a-container">StorageOS Custom
Resource</a>.</p>
</blockquote>
<p> </p>
<p>(Option 2) Mount propagation is not enabled.</p>
<blockquote>
<p>Applies only if Option 1 is configured properly.</p>
</blockquote>
<h3 id="assert-1">Assert:</h3>
<p><strong>If not using the Kubelet as a container</strong>, SSH into one of the nodes and check if
<code>/var/lib/storageos/volumes</code> is empty. If so, exec into any StorageOS pod and
check the same directory.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~# ls /var/lib/storageos/volumes/
root@node1:~#     <span style="color:#8f5902;font-style:italic"># &amp;lt;-- Shouldn&#39;t be blank</span>
root@node1:~# kubectl <span style="color:#204a87">exec</span> <span style="color:#000">$POD_ID</span> -c storageos -- ls -l /var/lib/storageos/volumes
bst-196004
d529b340-0189-15c7-f8f3-33bfc4cf03fa
ff537c5b-e295-e518-a340-0b6308b69f74
</code></pre></div><p>If the directory inside the container and the device files are visible,
disabled mount propagation is the cause.</p>
<p><strong>If using the Kubelet as a container</strong>, SSH into one of the nodes and check if
<code>/var/lib/kubelet/plugins/kubernetes.io~storageos/devices</code> is empty. If
so, exec into any StorageOS pod and check the same directory.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~# ls /var/lib/kubelet/plugins/kubernetes.io~storageos/devices
root@node1:~#      <span style="color:#8f5902;font-style:italic"># &amp;lt;-- Shouldn&#39;t be blank</span>
root@node1:~# kubectl <span style="color:#204a87">exec</span> <span style="color:#000">$POD_ID</span> -c storageos -- ls -l /var/lib/kubelet/plugins/kubernetes.io~storageos/devices
bst-196004
d529b340-0189-15c7-f8f3-33bfc4cf03fa
ff537c5b-e295-e518-a340-0b6308b69f74
</code></pre></div><p>If the directory inside the container and the device files are visible,
disabled mount propagation is the cause.</p>
<h3 id="solution-1">Solution:</h3>
<p>Older versions of Kubernetes need to enable mount propagation as it is not
enabled by default. Most Kubernetes distributions allow MountPropagation to be
enabled using FeatureGates. Rancher specifically, needs to enable it in the
&ldquo;View in API&rdquo; section of your cluster. You need to edit the section
&ldquo;rancherKubernetesEngineConfig&rdquo; to enable the Kubelet feature gate.</p>
<h2 id="pvc-pending-state---failed-to-dial-storageos">PVC pending state - Failed to dial StorageOS</h2>
<p>A created PVC remains in pending state making pods that need to mount that PVC
unable to start.</p>
<h3 id="issue-1">Issue:</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~/# kubectl get pvc
NAME      STATUS        VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
vol-1     Pending                                                                            fast           7s

kubectl describe pvc <span style="color:#000">$PVC</span>
<span style="color:#ce5c00;font-weight:bold">(</span>...<span style="color:#ce5c00;font-weight:bold">)</span>
Events:
  Type     Reason              Age               From                         Message
  ----     ------              ----              ----                         -------
  Warning  ProvisioningFailed  7s <span style="color:#ce5c00;font-weight:bold">(</span>x2 over 18s<span style="color:#ce5c00;font-weight:bold">)</span>  persistentvolume-controller  Failed to provision volume with StorageClass <span style="color:#4e9a06">&#34;fast&#34;</span>: Get http://storageos-cluster/version: failed to dial all known cluster members, <span style="color:#ce5c00;font-weight:bold">(</span>10.233.59.206:5705<span style="color:#ce5c00;font-weight:bold">)</span>
</code></pre></div><h3 id="reason-1">Reason:</h3>
<p>For non CSI installations of StorageOS, Kubernetes uses the StorageOS
API endpoint to communicate. If that communication fails, relevant actions such
as create or mount volume can&rsquo;t be transmitted to StorageOS, hence the PVC
will remain in pending state. StorageOS never received the action to perform,
so it never sent back an acknowledgement.</p>
<p>In this case, the Event message indicates that StorageOS API is not responding,
implying that StorageOS is not running. For Kubernetes to define StorageOS pods
ready, the health check must pass.</p>
<h3 id="assert-2">Assert:</h3>
<p>Check the status of StorageOS pods.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~/# kubectl -n kube-system get pod --selector <span style="color:#000">app</span><span style="color:#ce5c00;font-weight:bold">=</span>storageos <span style="color:#8f5902;font-style:italic"># for CSI add --selector kind=daemonset</span>
NAME              READY     STATUS    RESTARTS   AGE
storageos-qrqkj   0/1       Running   <span style="color:#0000cf;font-weight:bold">0</span>          1m
storageos-s4bfv   0/1       Running   <span style="color:#0000cf;font-weight:bold">0</span>          1m
storageos-vcpfx   0/1       Running   <span style="color:#0000cf;font-weight:bold">0</span>          1m
storageos-w98f5   0/1       Running   <span style="color:#0000cf;font-weight:bold">0</span>          1m
</code></pre></div><p>If the pods are not READY, the service will not forward traffic to the API they
serve hence PVC will remain in pending state until StorageOS pods are
available.</p>
<blockquote>
<p>Kubernetes keeps trying to execute the action until it succeeds. If
a PVC is created before StorageOS finish starting, the PVC will be created
eventually.</p>
</blockquote>
<h3 id="solution-2">Solution:</h3>
<ul>
<li>StorageOS health check takes 60 seconds of grace before reporting as READY.
If StorageOS is starting properly after that period, the volume will be
created when StorageOS finishes its bootstrap.</li>
<li>If StorageOS is not running or is not starting properly, the solution would
be to troubleshoot the installation.</li>
</ul>
<h2 id="pvc-pending-state---secret-missing">PVC pending state - Secret Missing</h2>
<p>A created PVC remains in pending state making pods that need to mount that PVC
unable to start.</p>
<h3 id="issue-2">Issue:</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl describe pvc <span style="color:#000">$PVC</span>
<span style="color:#ce5c00;font-weight:bold">(</span>...<span style="color:#ce5c00;font-weight:bold">)</span>
Events:
  Type     Reason              Age                From                         Message
  ----     ------              ----               ----                         -------
  Warning  ProvisioningFailed  13s <span style="color:#ce5c00;font-weight:bold">(</span>x2 over 28s<span style="color:#ce5c00;font-weight:bold">)</span>  persistentvolume-controller  Failed to provision volume with StorageClass <span style="color:#4e9a06">&#34;fast&#34;</span>: failed to get secret from <span style="color:#ce5c00;font-weight:bold">[</span><span style="color:#4e9a06">&#34;storageos&#34;</span>/<span style="color:#4e9a06">&#34;storageos-api&#34;</span><span style="color:#ce5c00;font-weight:bold">]</span>

</code></pre></div><h3 id="reason-2">Reason:</h3>
<p>For non CSI installations of StorageOS, Kubernetes uses the StorageOS
API endpoint to communicate. If that communication fails, relevant actions such
as create or mount a volume can&rsquo;t be transmitted to StorageOS, and the PVC
will remain in pending state. StorageOS never received the action to perform,
so it never sent back an acknowledgement.</p>
<p>The StorageClass provisioned for StorageOS references a Secret from where it
retrieves the API endpoint and the authentication parameters. If that secret is
incorrect or missing, the connections won&rsquo;t be established. It is common to see
that the Secret has been deployed in a different namespace where the
StorageClass expects it or that is has been deployed with a different name.</p>
<h3 id="assert-3">Assert:</h3>
<ol>
<li>
<p>Check the StorageClass parameters to know where the Secret is expected to be found.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl get storageclass fast -o yaml
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  creationTimestamp: 2018-09-25T08:44:57Z
  labels:
    app: storageos
  name: fast
  resourceVersion: <span style="color:#4e9a06">&#34;108853&#34;</span>
  selfLink: /apis/storage.k8s.io/v1/storageclasses/fast
  uid: 48490a9b-c09f-11e8-ba01-0800278dc04d
parameters:
  adminSecretName: storageos-api
  adminSecretNamespace: storageos
  description: Kubernetes volume
  fsType: ext4
  pool: default
provisioner: kubernetes.io/storageos
reclaimPolicy: Delete
</code></pre></div><blockquote>
<p>Note that the parameters specify <code>adminSecretName</code> and <code>adminSecretNamespace</code>.</p>
</blockquote>
</li>
<li>
<p>Check if the secret exists according to those parameters</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl -n kube-system get secret storageos-api
No resources found.
Error from server <span style="color:#ce5c00;font-weight:bold">(</span>NotFound<span style="color:#ce5c00;font-weight:bold">)</span>: secrets <span style="color:#4e9a06">&#34;storageos-api&#34;</span> not found
</code></pre></div><p>If no resources are found, it is clear that the Secret doesn&rsquo;t exist or it is not deployed in
the right location.</p>
</li>
</ol>
<h3 id="solution-3">Solution:</h3>
<p>Deploy StorageOS following the <a href="https://docs.storageos.com/docs/introduction/quickstart/">installation procedures</a>. If you are using the manifests
provided for Kubernetes to deploy StorageOS rather than using automated
provisioners, make sure that the StorageClass parameters and the Secret
reference match.</p>
<h2 id="node-name-different-from-hostname">Node name different from Hostname</h2>
<h4 id="issue-3">Issue:</h4>
<p>StorageOS nodes can&rsquo;t join the cluster showing the following log entries.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:47:02Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;failed to start api&#34;</span> <span style="color:#000">error</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;error verifying UUID: UUID aed3275f-846b-1f75-43a1-adbfec8bf974 has already been registered and has hostname &#39;debian-4&#39;, not &#39;node4&#39;&#34;</span> <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">command</span>
</code></pre></div><h3 id="reason-3">Reason:</h3>
<p>The StorageOS registration process to start the cluster uses the hostname of
the node where the StorageOS container is running, provided by the Kubelet.
However, StorageOS verifies the network hostname of the OS as a prestart check
to make sure it can communicate with other nodes. If those names don&rsquo;t match,
StorageOS will be unable to start.</p>
<h3 id="solution-4">Solution:</h3>
<p>Make sure the hostnames match with the Kubernetes advertised names. If
you have changed the hostname of your nodes, make sure that you restart the
nodes to apply the change.</p>
<h2 id="peer-discovery---networking">Peer discovery - Networking</h2>
<h3 id="issue-4">Issue:</h3>
<p>StorageOS nodes can&rsquo;t join the cluster showing the following logs after one
minute of container uptime.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;not first cluster node, joining first node&#34;</span> <span style="color:#000">action</span><span style="color:#ce5c00;font-weight:bold">=</span>create <span style="color:#000">address</span><span style="color:#ce5c00;font-weight:bold">=</span>172.28.128.5 <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>etcd <span style="color:#000">host</span><span style="color:#ce5c00;font-weight:bold">=</span>node3 <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>cp <span style="color:#000">target</span><span style="color:#ce5c00;font-weight:bold">=</span>172.28.128.6
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;could not retrieve cluster config from api&#34;</span> <span style="color:#000">status_code</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">503</span>
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;failed to join existing cluster&#34;</span> <span style="color:#000">action</span><span style="color:#ce5c00;font-weight:bold">=</span>create <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>etcd <span style="color:#000">endpoint</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;172.28.128.3,172.28.128.4,172.28.128.5,172.28.128.6&#34;</span> <span style="color:#000">error</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;503 Service Unavailable&#34;</span> <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>cp
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;retrying cluster join in 5 seconds...&#34;</span> <span style="color:#000">action</span><span style="color:#ce5c00;font-weight:bold">=</span>create <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>etcd <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>cp
</code></pre></div><h3 id="reason-4">Reason:</h3>
<p>StorageOS uses a gossip protocol to discover nodes in the cluster. When
StorageOS starts, one or more nodes can be referenced so new nodes can query
existing nodes for the list of members. This error indicates that the node
can&rsquo;t connect to any of the nodes in the known list. The known list is defined
in the <code>JOIN</code> variable.</p>
<h3 id="assert-4">Assert:</h3>
<p>It is likely that ports are block by a firewall.</p>
<p>SSH into one of your nodes and check connectivity to the rest of the nodes.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Successfull execution:</span>
<span style="color:#ce5c00;font-weight:bold">[</span>root@node06 ~<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#8f5902;font-style:italic"># nc -zv node04 5705</span>
Ncat: Version 7.50 <span style="color:#ce5c00;font-weight:bold">(</span> https://nmap.org/ncat  <span style="color:#ce5c00;font-weight:bold">)</span>
Ncat: Connected to 10.0.1.166:5705.
Ncat: <span style="color:#0000cf;font-weight:bold">0</span> bytes sent, <span style="color:#0000cf;font-weight:bold">0</span> bytes received in 0.01 seconds.
</code></pre></div><p>StorageOS exposes network diagnostics in its API, viewable from the CLI.  To
use this feature, the CLI must query the API of a running node. The diagnostics
show information from all known cluster members. If all the ports are blocked
during the first bootstrap of the cluster, the diagnostics won&rsquo;t show any data
as nodes couldn&rsquo;t register.</p>
<blockquote>
<p>StorageOS networks diagnostics are available for storageos-rc5 and
storageos-cli-rc3 and above.</p>
</blockquote>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#8f5902;font-style:italic"># Example:</span>
root@node1:~# storageos cluster connectivity
SOURCE  NAME            ADDRESS            LATENCY      STATUS  MESSAGE
node4   node2.nats      172.28.128.4:5708  1.949275ms   OK
node4   node3.api       172.28.128.5:5705  3.070574ms   OK
node4   node3.nats      172.28.128.5:5708  2.989238ms   OK
node4   node2.directfs  172.28.128.4:5703  2.925707ms   OK
node4   node3.etcd      172.28.128.5:5707  2.854726ms   OK
node4   node3.directfs  172.28.128.5:5703  2.833371ms   OK
node4   node1.api       172.28.128.3:5705  2.714467ms   OK
node4   node1.nats      172.28.128.3:5708  2.613752ms   OK
node4   node1.etcd      172.28.128.3:5707  2.594159ms   OK
node4   node1.directfs  172.28.128.3:5703  2.601834ms   OK
node4   node2.api       172.28.128.4:5705  2.598236ms   OK
node4   node2.etcd      172.28.128.4:5707  16.650625ms  OK
node3   node4.nats      172.28.128.6:5708  1.304126ms   OK
node3   node4.api       172.28.128.6:5705  1.515218ms   OK
node3   node2.directfs  172.28.128.4:5703  1.359827ms   OK
node3   node1.api       172.28.128.3:5705  1.185535ms   OK
node3   node4.directfs  172.28.128.6:5703  1.379765ms   OK
node3   node1.etcd      172.28.128.3:5707  1.221176ms   OK
node3   node1.nats      172.28.128.3:5708  1.330122ms   OK
node3   node2.api       172.28.128.4:5705  1.238541ms   OK
node3   node1.directfs  172.28.128.3:5703  1.413574ms   OK
node3   node2.etcd      172.28.128.4:5707  1.214273ms   OK
node3   node2.nats      172.28.128.4:5708  1.321145ms   OK
node1   node4.directfs  172.28.128.6:5703  1.140797ms   OK
node1   node3.api       172.28.128.5:5705  1.089252ms   OK
node1   node4.api       172.28.128.6:5705  1.178439ms   OK
node1   node4.nats      172.28.128.6:5708  1.176648ms   OK
node1   node2.directfs  172.28.128.4:5703  1.529612ms   OK
node1   node2.etcd      172.28.128.4:5707  1.165681ms   OK
node1   node2.api       172.28.128.4:5705  1.29602ms    OK
node1   node2.nats      172.28.128.4:5708  1.267454ms   OK
node1   node3.nats      172.28.128.5:5708  1.485657ms   OK
node1   node3.etcd      172.28.128.5:5707  1.469429ms   OK
node1   node3.directfs  172.28.128.5:5703  1.503015ms   OK
node2   node4.directfs  172.28.128.6:5703  1.484ms      OK
node2   node1.directfs  172.28.128.3:5703  1.275304ms   OK
node2   node4.nats      172.28.128.6:5708  1.261422ms   OK
node2   node4.api       172.28.128.6:5705  1.465532ms   OK
node2   node3.api       172.28.128.5:5705  1.252768ms   OK
node2   node3.nats      172.28.128.5:5708  1.212332ms   OK
node2   node3.directfs  172.28.128.5:5703  1.192792ms   OK
node2   node3.etcd      172.28.128.5:5707  1.270076ms   OK
node2   node1.etcd      172.28.128.3:5707  1.218522ms   OK
node2   node1.api       172.28.128.3:5705  1.363071ms   OK
node2   node1.nats      172.28.128.3:5708  1.349383ms   OK
</code></pre></div><h3 id="solution-5">Solution:</h3>
<p>Open ports following the <a href="https://docs.storageos.com/docs/prerequisites/firewalls/">prerequisites page</a>.</p>
<h2 id="peer-discovery---pod-allocation">Peer discovery - Pod allocation</h2>
<h3 id="issue-5">Issue:</h3>
<p>StorageOS nodes can&rsquo;t join the cluster and show the following log entries.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;not first cluster node, joining first node&#34;</span> <span style="color:#000">action</span><span style="color:#ce5c00;font-weight:bold">=</span>create <span style="color:#000">address</span><span style="color:#ce5c00;font-weight:bold">=</span>172.28.128.5 <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>etcd <span style="color:#000">host</span><span style="color:#ce5c00;font-weight:bold">=</span>node3 <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>cp <span style="color:#000">target</span><span style="color:#ce5c00;font-weight:bold">=</span>172.28.128.6
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;could not retrieve cluster config from api&#34;</span> <span style="color:#000">status_code</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">503</span>
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;failed to join existing cluster&#34;</span> <span style="color:#000">action</span><span style="color:#ce5c00;font-weight:bold">=</span>create <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>etcd <span style="color:#000">endpoint</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;172.28.128.3,172.28.128.4,172.28.128.5,172.28.128.6&#34;</span> <span style="color:#000">error</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;503 Service Unavailable&#34;</span> <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>cp
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T13:40:20Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>info <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;retrying cluster join in 5 seconds...&#34;</span> <span style="color:#000">action</span><span style="color:#ce5c00;font-weight:bold">=</span>create <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>etcd <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>cp
</code></pre></div><h3 id="reason-5">Reason:</h3>
<p>StorageOS uses a gossip protocol to discover the nodes in the cluster. When
StorageOS starts, one or more active nodes must be referenced so new nodes can
query existing nodes for the list of members. This error indicates that the node
can&rsquo;t connect to any of the nodes in the known list. The known list is defined
in the <code>JOIN</code> variable.</p>
<p>If there are no active StorageOS nodes, the bootstrap process will elect the
first node in the <code>JOIN</code> variable as master, and the rest will try to
discover from it. In case of that node not starting, the whole cluster will
remain unable to bootstrap.</p>
<p>Installations of StorageOS use a DaemonSet, and by default do not schedule
StorageOS pods to master nodes, due to the presence of the
<code>node-role.kubernetes.io/master:NoSchedule</code> taint that is typically present. In
such cases the <code>JOIN</code> variable must not contain master nodes or the StorageOS
cluster will remain unable to start.</p>
<h3 id="assert-5">Assert:</h3>
<p>Check that the first node of the <code>JOIN</code> variable started properly.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@node1:~/# kubectl -n kube-system describe ds/storageos <span style="color:#000;font-weight:bold">|</span> grep JOIN
    JOIN:          172.28.128.3,172.28.128.4,172.28.128.5
root@node1:~/# kubectl -n kube-system get pod -o wide <span style="color:#000;font-weight:bold">|</span> grep 172.28.128.3
storageos-8zqxl   1/1       Running   <span style="color:#0000cf;font-weight:bold">0</span>          2m        172.28.128.3   node1
</code></pre></div><h3 id="solution-6">Solution:</h3>
<p>Make sure that the <code>JOIN</code> variable doesn&rsquo;t specify the master nodes. In case
you are using the discovery service, it is necessary to ensure that the
DaemonSet won&rsquo;t allocate Pods on the masters. This can be achieved with taints,
node selectors or labels.</p>
<p>For installations with the StorageOS operator you can specify which nodes to
deploy StorageOS on using nodeSelectors. See examples in the <a href="docs/reference/cluster-operator/examples/#installing-to-a-subset-of-nodes">Cluster Operator
Examples
page</a>.</p>
<p>For more advanced installations using compute-only and storage nodes, check the
<code>storageos.com/deployment=computeonly</code> label that can be added to the nodes
through Kubernetes node labels, or StorageOS in the <a href="https://docs.storageos.com/docs/reference/labels/">Labels</a> page.</p>
<h2 id="lio-initerror">LIO Init:Error</h2>
<h3 id="issue-6">Issue:</h3>
<p>StorageOS pods not starting with <code>Init:Error</code></p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl -n kube-system get pod
NAME              READY     STATUS              RESTARTS   AGE
storageos-2kwqx   0/3       Init:Err             <span style="color:#0000cf;font-weight:bold">0</span>          6s
storageos-cffcr   0/3       Init:Err             <span style="color:#0000cf;font-weight:bold">0</span>          6s
storageos-d4f69   0/3       Init:Err             <span style="color:#0000cf;font-weight:bold">0</span>          6s
storageos-nhq7m   0/3       Init:Err             <span style="color:#0000cf;font-weight:bold">0</span>          6s
</code></pre></div><h3 id="reason-6">Reason:</h3>
<p>This indicates that since the Linux open source SCSI drivers are not enabled,
StorageOS cannot start. The StorageOS DaemonSet enables the required kernel
modules on the host system. If you are seeing these errors it is because that
container couldn&rsquo;t load the modules.</p>
<h3 id="assert-6">Assert</h3>
<p>Check the logs of the init container.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl -n kube-system logs <span style="color:#000">$ANY_STORAGEOS_POD</span> -c storageos-init
</code></pre></div><p>In case of failure, it will show the following output, indicating which kernel
modules couldn&rsquo;t be loaded or that they are not properly configured:</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Checking configfs
configfs mounted on sys/kernel/config
Module target_core_mod is not running
executing modprobe -b target_core_mod
Module tcm_loop is not running
executing modprobe -b tcm_loop
modprobe: FATAL: Module tcm_loop not found.
</code></pre></div><h3 id="solution-7">Solution:</h3>
<p>Install the required kernel modules (usually found in the
<code>linux-image-extra-$(uname -r)</code> package of your distribution) on your nodes
following this <a href="https://docs.storageos.com/docs/prerequisites/systemconfiguration/">prerequisites page</a> and delete StorageOS
pods, allowing the DaemonSet to create the pods again.</p>
<h2 id="lio-not-enabled">LIO not enabled</h2>
<h3 id="issue-7">Issue:</h3>
<p>StorageOS node can&rsquo;t start and shows the following log entries.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T14:34:40Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;liocheck returned error&#34;</span> <span style="color:#000">category</span><span style="color:#ce5c00;font-weight:bold">=</span>liocheck <span style="color:#000">error</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;exit status 1&#34;</span> <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span>dataplane <span style="color:#000">stderr</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Sysfs root &#39;/sys/kernel/config/target&#39; is missing, is kernel configfs present and target_core_mod loaded? category=fslio level=warn\nRuntime error checking stage &#39;target_core_mod&#39;: SysFs root missing category=fslio level=warn\nliocheck: FAIL (lio_capable_system() returns failure) category=fslio level=fatal\n&#34;</span> <span style="color:#000">stdout</span><span style="color:#ce5c00;font-weight:bold">=</span>
<span style="color:#000">time</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;2018-09-24T14:34:40Z&#34;</span> <span style="color:#000">level</span><span style="color:#ce5c00;font-weight:bold">=</span>error <span style="color:#000">msg</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;failed to start dataplane services&#34;</span> <span style="color:#000">error</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;system dependency check failed: exit status 1&#34;</span> <span style="color:#000">module</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#204a87">command</span>
</code></pre></div><h3 id="reason-7">Reason:</h3>
<p>This indicates that one or more kernel modules required for StorageOS are
not loaded.</p>
<h3 id="assert-7">Assert</h3>
<p>The following kernel modules must be enabled in the host.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">lsmod  <span style="color:#000;font-weight:bold">|</span> egrep <span style="color:#4e9a06">&#34;^tcm_loop|^target_core_mod|^target_core_file|^configfs&#34;</span>
</code></pre></div><h3 id="solution-8">Solution:</h3>
<p>Install the required kernel modules (usually found in the
<code>linux-image-extra-$(uname -r)</code> package of your distribution) on your nodes
following this <a href="https://docs.storageos.com/docs/prerequisites/systemconfiguration/">prerequisites page</a> and restart the container.</p>
<h2 id="openshift-storageos-pods-missing----daemonset-error">(OpenShift) StorageOS pods missing &ndash; DaemonSet error</h2>
<p>StorageOS DaemonSet doesn&rsquo;t have any pod replicas. The DaemonSet couldn&rsquo;t
allocate any Pod due to security issues.</p>
<h3 id="issue-8">Issue:</h3>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ce5c00;font-weight:bold">[</span>root@master02 standard<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#8f5902;font-style:italic"># oc get pod</span>
No resources found.
<span style="color:#ce5c00;font-weight:bold">[</span>root@master02 standard<span style="color:#ce5c00;font-weight:bold">]</span><span style="color:#8f5902;font-style:italic"># oc describe daemonset storageos</span>
<span style="color:#ce5c00;font-weight:bold">(</span>...<span style="color:#ce5c00;font-weight:bold">)</span>
Events:
  Type     Reason        Age                From                  Message
  ----     ------        ----               ----                  -------
  Warning  FailedCreate  0s <span style="color:#ce5c00;font-weight:bold">(</span>x12 over 10s<span style="color:#ce5c00;font-weight:bold">)</span>  daemonset-controller  Error creating: pods <span style="color:#4e9a06">&#34;storageos-&#34;</span> is forbidden: unable to validate against any security context constraint: <span style="color:#ce5c00;font-weight:bold">[</span>provider restricted: .spec.securityContext.hostNetwork: Invalid value: true: Host network is not allowed to be used provider restricted: .spec.securityContext.hostPID: Invalid value: true: Host PID is not allowed to be used spec.volumes<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>: Invalid value: <span style="color:#4e9a06">&#34;hostPath&#34;</span>: hostPath volumes are not allowed to be used spec.volumes<span style="color:#ce5c00;font-weight:bold">[</span>1<span style="color:#ce5c00;font-weight:bold">]</span>: Invalid value: <span style="color:#4e9a06">&#34;hostPath&#34;</span>: hostPath volumes are not allowed to be used spec.volumes<span style="color:#ce5c00;font-weight:bold">[</span>2<span style="color:#ce5c00;font-weight:bold">]</span>: Invalid value: <span style="color:#4e9a06">&#34;hostPath&#34;</span>: hostPath volumes are not allowed to be used spec.volumes<span style="color:#ce5c00;font-weight:bold">[</span>3<span style="color:#ce5c00;font-weight:bold">]</span>: Invalid value: <span style="color:#4e9a06">&#34;hostPath&#34;</span>: hostPath volumes are not allowed to be used spec.initContainers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.privileged: Invalid value: true: Privileged containers are not allowed capabilities.add: Invalid value: <span style="color:#4e9a06">&#34;SYS_ADMIN&#34;</span>: capability may not be added spec.initContainers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.hostNetwork: Invalid value: true: Host network is not allowed to be used spec.initContainers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.containers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.hostPort: Invalid value: 5705: Host ports are not allowed to be used spec.initContainers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.hostPID: Invalid value: true: Host PID is not allowed to be used spec.containers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.privileged: Invalid value: true: Privileged containers are not allowed capabilities.add: Invalid value: <span style="color:#4e9a06">&#34;SYS_ADMIN&#34;</span>: capability may not be added spec.containers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.hostNetwork: Invalid value: true: Host network is not allowed to be used spec.containers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.containers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.hostPort: Invalid value: 5705: Host ports are not allowed to be used spec.containers<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]</span>.securityContext.hostPID: Invalid value: true: Host PID is not allowed to be used<span style="color:#ce5c00;font-weight:bold">]</span>
</code></pre></div><h3 id="reason-8">Reason:</h3>
<p>The OpenShift cluster has security context constraint policies enabled that
forbid any pod, without an explicitly set policy for the service account, to
be allocated.</p>
<h3 id="assert-8">Assert:</h3>
<p>Check if the StorageOS ServiceAccount can create pods with enough permissions</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">oc get scc privileged -o yaml <span style="color:#8f5902;font-style:italic"># Or custom scc with enough privileges</span>
<span style="color:#ce5c00;font-weight:bold">(</span>...<span style="color:#ce5c00;font-weight:bold">)</span>
users:
- system:admin
- system:serviceaccount:openshift-infra:build-controller
- system:serviceaccount:management-infra:management-admin
- system:serviceaccount:management-infra:inspector-admin
- system:serviceaccount:storageos:storageos                       <span style="color:#000;font-weight:bold">&amp;</span>lt<span style="color:#000;font-weight:bold">;</span>--
- system:serviceaccount:tiller:tiller
</code></pre></div><p>If the StorageOS sa system:serviceaccount:storageos:storageos is in the
privileged scc it will be able to create pods.</p>
<h3 id="solution-9">Solution:</h3>
<p>Add the ServiceAccount system:serviceaccount:storageos:storageos to a scc with
enough privileges.</p>
<div class="highlight"><pre style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">oc adm policy add-scc-to-user privileged system:serviceaccount:storageos:storageos
</code></pre></div><h2 id="getting-help">Getting Help</h2>
<p>If our troubleshooting guides do not help resolve your issue, please see our
<a href="https://docs.storageos.com/docs/support/">support section</a> for details on how
to get in touch with us.</p>

	
	
	<div class="text-muted mt-5 pt-3 border-top"></div>
</div>


          </main>
        </div>
      </div>

    </div>
    
<footer class="foot row">
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-2">
      <div class="footer-nav-column">
        <a href="https://storageos.com/" class="custom-logo-link"><img src="https://storageos.com/wp-content/themes/storageOS/images/logo.svg" class="master-logo"></a>
          <div class="footer-social">
              <div class="menu-footer-social-container">
                  <ul id="menu-footer-social" class="menu">
                    <li id="menu-item-22" class="menu-item menu-item-type-custom menu-item-object-custom social-icon twitter menu-item-22"><a href="https://twitter.com/Storage_OS" data-ps2id-api="true"><i class="icon-2x icon-twitter "></i><span class="fa-hidden">Twitter</span></a></li>
                    <li id="menu-item-23" class="menu-item menu-item-type-custom menu-item-object-custom social-icon facebook menu-item-23"><a href="https://www.facebook.com/storageos" data-ps2id-api="true"><i class="icon-2x icon-facebook "></i><span class="fa-hidden">Facebook</span></a></li>
                    <li id="menu-item-24" class="menu-item menu-item-type-custom menu-item-object-custom social-icon linkedin menu-item-24"><a href="https://www.linkedin.com/company/storageos" data-ps2id-api="true"><i class="icon-2x icon-linkedin "></i><span class="fa-hidden">LinkedIn</span></a></li>
                    <li id="menu-item-3202" class="slack menu-item menu-item-type-custom menu-item-object-custom menu-item-3202"><a href="https://slack.storageos.com/" data-ps2id-api="true">Slack</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="footer-nav-wrap footer-nav-wrap-1">
            <div class="col-sm-6">
              <div class="footer-nav-column"><h3 class="widget-title">Product</h3>
                <div class="menu-footer-product-container">
                  <ul id="menu-footer-product" class="menu">
                    <li id="menu-item-3818" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3818"><a href="https://storageos.com/product" data-ps2id-api="true">Overview</a></li>
                    <li id="menu-item-3817" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3817"><a href="https://storageos.com/features" data-ps2id-api="true">Features</a></li>
                    <li id="menu-item-3891" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3891"><a href="https://storageos.com/why-storageos" data-ps2id-api="true">Why StorageOS</a></li>
                    <li id="menu-item-3892" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3892"><a href="https://storageos.com/how-it-works" data-ps2id-api="true">How it works</a></li>
                    <li id="menu-item-3819" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3819"><a href="https://storageos.com/use-cases" data-ps2id-api="true">Use cases</a></li>
                    <li id="menu-item-4616" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4616"><a href="https://storageos.com/support" data-ps2id-api="true">Support</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-sm-6">
              <div class="footer-nav-column"><h3 class="widget-title">Solutions</h3>
                <div class="menu-footer-solutions-container">
                  <ul id="menu-footer-solutions" class="menu">
                    <li id="menu-item-3894" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3894"><a href="https://storageos.com/developers" data-ps2id-api="true">Developers</a></li>
                    <li id="menu-item-3895" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3895"><a href="https://storageos.com/infrastructure-managers" data-ps2id-api="true">Infrastructure Managers</a></li>
                    <li id="menu-item-3893" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3893"><a href="https://storageos.com/cloud" data-ps2id-api="true">Cloud</a></li>
                  </ul>
                </div>

                <h3 class="widget-title">Docs</h3>
                <div class="menu-footer-docs-container">
                  <ul id="menu-footer-docs" class="menu">
                    <li id="menu-item-3828" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3828"><a href="https://docs.storageos.com/" data-ps2id-api="true">Overview</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="footer-nav-wrap footer-nav-wrap-2">
            <div class="col-sm-6">
              <div class="footer-nav-column"><h3 class="widget-title">Company</h3>
                <div class="menu-footer-company-container">
                  <ul id="menu-footer-company" class="menu">
                    <li id="menu-item-3830" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3830"><a href="https://storageos.com/company/#about" data-ps2id-api="true">About Us</a></li>
                    <li id="menu-item-4123" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4123"><a href="https://storageos.com/leadership" data-ps2id-api="true">Leadership</a></li>
                    <li id="menu-item-3840" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3840"><a href="https://storageos.com/careers" data-ps2id-api="true">Careers</a></li>
                    <li id="menu-item-3907" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3907"><a href="https://storageos.com/news" data-ps2id-api="true">News</a></li>
                    <li id="menu-item-3908" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3908"><a href="https://storageos.com/events" data-ps2id-api="true">Events</a></li>
                    <li id="menu-item-4702" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4702"><a href="https://storageos.com/customers" data-ps2id-api="true">Customers</a></li>
                    <li id="menu-item-4617" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4617"><a href="https://storageos.com/partners" data-ps2id-api="true">Partners</a></li>
                    <li id="menu-item-4124" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-4124"><a href="https://storageos.com/contact" data-ps2id-api="true">Contact</a></li>
                    <li id="menu-item-3924" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3924"><a href="https://storageos.com/privacy" data-ps2id-api="true">Legal</a></li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="col-sm-6">
              <div class="footer-nav-column"><h3 class="widget-title">Learn</h3>
                <div class="menu-footer-learn-container">
                  <ul id="menu-footer-learn" class="menu">
                    <li id="menu-item-3835" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3835"><a href="https://storageos.com/blog" data-ps2id-api="true">Blog</a></li>
                    <li id="menu-item-3837" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3837"><a href="https://play.storageos.com/" data-ps2id-api="true">play.storageos.com</a></li>
                    <li id="menu-item-3838" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-3838"><a href="https://storageos.com/resources" data-ps2id-api="true">Resources</a></li>
                    <li id="menu-item-3839" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-3839"><a href="https://resources.storageos.com/demo-request" data-ps2id-api="true">Get a demo</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
</footer>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>









<script src="/js/main.min.07381cb6406f1d15281f85a6dea05a3c2e9460f063c7e8dcc39b41f18db3aad0.js" integrity="sha256-BzgctkBvHRUoH4Wm3qBaPC6UYPBjx&#43;jcw5tB8Y2zqtA=" crossorigin="anonymous"></script>


<script type="text/javascript"
	  id="hs-script-loader"
	  async
	  defer
	  src="//js.hs-scripts.com/3402546.js"></script>



  </body>
</html>
